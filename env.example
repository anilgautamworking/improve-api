# Database Configuration
# Matches docker-compose.yml: user=improve-user, password=improve123, db=improve-db, port=5442
DATABASE_URL=postgresql://improve-user:improve123@localhost:5442/improve-db

# AI Provider Selection
# Set to "openai" to use OpenAI API, or "ollama" to use local Ollama
AI_PROVIDER=openai

# OpenAI Configuration (required when AI_PROVIDER=openai)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000

# Ollama Configuration (required when AI_PROVIDER=ollama)
# Make sure Ollama is running: ollama serve
# Pull the model first: ollama pull myaniu/qwen2.5-1m:14b
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=myaniu/qwen2.5-1m:14b
OLLAMA_TEMPERATURE=0.7

# Logging Configuration
LOG_LEVEL=INFO
LOG_FILE=logs/daily_question_bank.log

# RSS Feed URLs (comma-separated to add multiple feeds per category)
# The Hindu
RSS_FEEDS_THE_HINDU_MAIN=https://www.thehindu.com/feeder/default.rss
RSS_FEEDS_THE_HINDU_INDIA=https://www.thehindu.com/news/national/feeder/default.rss
RSS_FEEDS_THE_HINDU_WORLD=https://www.thehindu.com/news/international/feeder/default.rss
RSS_FEEDS_THE_HINDU_OPINION=https://www.thehindu.com/opinion/feeder/default.rss
RSS_FEEDS_THE_HINDU_SPORTS=https://www.thehindu.com/sport/feeder/default.rss
RSS_FEEDS_THE_HINDU_BUSINESS=https://www.thehindu.com/business/feeder/default.rss
RSS_FEEDS_THE_HINDU_ECONOMY=https://www.thehindu.com/business/economy/feeder/default.rss
RSS_FEEDS_THE_HINDU_MARKETS=https://www.thehindu.com/business/markets/feeder/default.rss
RSS_FEEDS_THE_HINDU_SCIENCE=https://www.thehindu.com/sci-tech/science/feeder/default.rss

# The Hindu BusinessLine
RSS_FEEDS_BUSINESSLINE_MAIN=https://www.thehindubusinessline.com/news/feeder/default.rss
RSS_FEEDS_BUSINESSLINE_BUSINESS=https://www.thehindubusinessline.com/business/feeder/default.rss
RSS_FEEDS_BUSINESSLINE_ECONOMY=https://www.thehindubusinessline.com/economy/feeder/default.rss
RSS_FEEDS_BUSINESSLINE_MACRO=https://www.thehindubusinessline.com/economy/macro-economy/feeder/default.rss
RSS_FEEDS_BUSINESSLINE_AGRI=https://www.thehindubusinessline.com/economy/agri-business/feeder/default.rss
RSS_FEEDS_BUSINESSLINE_MONEY=https://www.thehindubusinessline.com/money-and-banking/feeder/default.rss
RSS_FEEDS_BUSINESSLINE_SPORTS=https://www.thehindubusinessline.com/sport/feeder/default.rss

# Indian Express
RSS_FEEDS_INDIAN_EXPRESS_MAIN=https://indianexpress.com/feed
RSS_FEEDS_INDIAN_EXPRESS_INDIA=https://indianexpress.com/section/india/feed
RSS_FEEDS_INDIAN_EXPRESS_WORLD=https://indianexpress.com/section/world/feed
RSS_FEEDS_INDIAN_EXPRESS_BUSINESS=https://indianexpress.com/section/business/feed/
RSS_FEEDS_INDIAN_EXPRESS_ECONOMICS=https://indianexpress.com/section/economics/feed/
RSS_FEEDS_INDIAN_EXPRESS_SPORTS=https://indianexpress.com/section/sports/feed/
RSS_FEEDS_INDIAN_EXPRESS_ENTERTAINMENT=https://indianexpress.com/section/entertainment/feed/
RSS_FEEDS_INDIAN_EXPRESS_LIFESTYLE=https://indianexpress.com/section/lifestyle/feed/
RSS_FEEDS_INDIAN_EXPRESS_TECHNOLOGY=https://indianexpress.com/section/technology/feed/
RSS_FEEDS_INDIAN_EXPRESS_EXPLAINED=https://indianexpress.com/section/explained/feed/

# Category Control for Question Generation (comma-separated list)
# Leave empty or set to "*" to enable all categories
ENABLED_CATEGORIES=Current Affairs,India,World,Opinion,Sports,Business,Economy,Markets,Science & Technology,Banking,Macro Economy,Agri Business,Money & Banking,Lifestyle,Entertainment,Technology,General Knowledge,Explained,Trade,Polity,History,Geography

# Processing Configuration
MAX_ARTICLES_PER_RUN=50  # Set to 0 for unlimited articles per run
MAX_ARTICLES_PER_CATEGORY=5  # Set to 0 for no per-category cap
QUESTIONS_PER_CATEGORY_PER_DAY=12  # Set to 0 to disable the per-day cap
QUESTION_COUNT_MIN=3
QUESTION_COUNT_MAX=4
ARTICLE_CONTEXT_MAX_CHARS=2500
# MIN_ARTICLE_SCORE=45
# QUESTION_QUALITY_MIN_SCORE=65
PDF_ONLY_CATEGORIES=Physics,Chemistry,Mathematics,Biology
PDF_SOURCE_NAMES=PDF,Academic PDF,NCERT,HC Verma,Study Material
RETRY_ATTEMPTS=3
RETRY_DELAY=5

# Prefect Task Timeouts (in seconds)
PREFECT_CRAWLER_TASK_TIMEOUT=3600  # 1 hour for crawler task
PREFECT_QUESTION_TASK_TIMEOUT=7200  # 2 hours for question generation task

# Circuit Breaker Configuration (for external API protection)
# OpenAI Circuit Breaker
OPENAI_CIRCUIT_BREAKER_THRESHOLD=5  # Number of failures before opening circuit
OPENAI_CIRCUIT_BREAKER_TIMEOUT=60.0  # Seconds to wait before testing recovery

# Ollama Circuit Breaker
OLLAMA_CIRCUIT_BREAKER_THRESHOLD=5  # Number of failures before opening circuit
OLLAMA_CIRCUIT_BREAKER_TIMEOUT=60.0  # Seconds to wait before testing recovery

# Browser/Scraping Configuration (CPU Optimization)
# Limits concurrent Playwright browser operations to reduce CPU usage
# Lower values (1-3) = less CPU usage, slower processing
# Higher values (5-10) = faster processing, more CPU usage
MAX_CONCURRENT_BROWSER_OPERATIONS=3

# Dashboard Configuration
DASHBOARD_HOST=0.0.0.0
DASHBOARD_PORT=5000
# CRITICAL: Set a strong secret key for Flask sessions (minimum 32 characters)
# Generate one: python3 -c 'import secrets; print(secrets.token_urlsafe(32))'
# Or run: ./scripts/generate_secrets.sh
# DO NOT use placeholder values - application will not start!
DASHBOARD_SECRET_KEY=REPLACE_WITH_GENERATED_SECRET_MINIMUM_32_CHARACTERS

# JWT Secret (REQUIRED)
# CRITICAL: Set a strong JWT secret (minimum 32 characters)
# Generate one: python3 -c 'import secrets; print(secrets.token_urlsafe(32))'
# Or run: ./scripts/generate_secrets.sh
# DO NOT use placeholder values - application will not start!
JWT_SECRET=REPLACE_WITH_GENERATED_SECRET_MINIMUM_32_CHARACTERS

# CORS Configuration
# Comma-separated list of allowed origins for CORS
# For production: https://quiz.devwork.in
# For development: http://localhost:5173,http://localhost:5174,http://localhost:3000
CORS_ORIGINS=https://quiz.devwork.in,http://localhost:5173,http://localhost:5174,http://localhost:3000

# Flask Configuration
# Set to "production" for production, "development" for dev
FLASK_ENV=production
# Set to "true" only for development - NEVER in production!
FLASK_DEBUG=False

# Cron Schedule
CRON_HOUR=6
CRON_MINUTE=0

# Prefect Orchestration (optional but recommended for monitoring)
# When docker-compose Prefect service is running locally the API is exposed on :4200
PREFECT_API_URL=http://127.0.0.1:4200/api
PREFECT_WORK_POOL=improve-api
PREFECT_WORK_QUEUE=default
